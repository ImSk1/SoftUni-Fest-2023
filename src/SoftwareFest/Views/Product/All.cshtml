@using SoftwareFest.Models.Enums;
@using SoftwareFest.Pagination.Enums;
@model SoftwareFest.Pagination.Page<SoftwareFest.ViewModels.ShowProductViewModel>
@{
    var prevDisabled = !Model.HasPreviousPage ? "disable" : "";
    var nextDisabled = !Model.HasNextPage ? "disable" : "";
    var name = ViewBag.Name;
    var type = ViewBag.Type;
    var direction = ViewBag.Direction;
}
<div class="container-all">
    <div class="products">
        <form method="post" asp-action="All" asp-route-name="@name" asp-route-direction="@direction" asp-route-type="@type" asp-controller="Product">
            <input name="name" value="@name" type="text" />
            <select name="type"> 
                <option selected="@(ProductType.All == type ? "true": "false")" value="@ProductType.All">All</option>
                <option selected="@(ProductType.Physical == type ? "true": "false")" value="@ProductType.Physical">Physical</option>
                <option selected="@(ProductType.Service == type ? "true": "false")" value="@ProductType.Service">Service</option>
            </select>
            <select name="direction">
                <option selected="@(SortDirection.Ascending == direction ? "true": "false")" value="@SortDirection.Ascending">Lowest -> Highest</option>
                <option selected="@(SortDirection.Descending == direction ? "true": "false")" value="@SortDirection.Descending">Highest -> Lowest</option>
            </select>
            <input type="submit" value="Search" />
        </form>
        @foreach (var product in Model)
        {
            <div class="product">
                <div class="border">
                    <input type="hidden" id="productId" value="@product.Id" />
                    <div class="product-image">
                        <img id="productImage" src="@product.ImageUrl" alt="@product.Name" />
                    </div>
                    <div class="product-details">
                        <div class="name">
                            <span id="productName">@product.Name</span>
                        </div>
                        <div class="product-retailer">
                            Retailer: 
                            <img src="~/images/9834857.jpg" />
                            <span id="productPrice">Kur</span>
                        </div>
                        <div class="product-price">
                            <span id="productPrice">@($"{product.Price:f2}") $</span>
                        </div>
                    </div>
                </div>
                <div class="btn-button">
                    <input class="btn-input" type="submit" value="Details" />
                </div>
            </div>
        }
        <div class="next-btn">
            <a asp-area="" asp-action="All" asp-controller="Product" asp-route-name="@name" asp-route-direction="@direction" asp-route-type="@type" asp-route-pageNumber="@(Model.CurrentPage - 1)" class="genric-btn @prevDisabled">Previous</a>
            <a asp-area="" asp-action="All" asp-controller="Product" asp-route-name="@name" asp-route-direction="@direction" asp-route-type="@type" asp-route-pageNumber="@(Model.CurrentPage + 1)" class="genric-btn @nextDisabled">Next</a>
        </div>
    </div>
</div>
